/**
  1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰:
    dp[i][0] è¡¨ç¤ºç¬¬iå¤©æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ 
    dp[i][1] è¡¨ç¤ºç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘
  2. ç¡®å®šé€’æ¨å…¬å¼:
    dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] - prices[i]);  
        ----> å¦‚æœç¬¬iå¤©æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡ºæ¥:
              ç¬¬i-1å¤©å°±æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±ä¿æŒç°çŠ¶ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘ å³ï¼šdp[i - 1][0]
              ç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘å‡å» ä»Šå¤©çš„è‚¡ç¥¨ä»·æ ¼ å³ï¼šdp[i - 1][1] - prices[i] 

    dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] + prices[i] - fee)ï¼›(ğŸŸ¢ è¿™æ˜¯ä¸lc122 maxProfitIIå”¯ä¸€ä¸åŒçš„åœ°æ–¹ï¼ğŸŸ¢)
        ----> å³dp[i][1] ----> å¦‚æœç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨, ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡ºæ¥
              ç¬¬i-1å¤©å°±ä¸æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±ä¿æŒç°çŠ¶ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘ å³ï¼šdp[i - 1][1]
              ç¬¬iå¤©å–å‡ºè‚¡ç¥¨ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æŒ‰ç…§ä»Šå¤©è‚¡ç¥¨ä½³ä»·æ ¼å–å‡ºåæ‰€å¾—ç°é‡‘-æ‰‹ç»­è´¹ å³ï¼šprices[i] + dp[i - 1][0] - fee

  3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–:
    dp[0][0] -= prices[0];
    dp[0][1] = 0
  4. ç¡®å®šéå†é¡ºåº: ä»å‰å‘åéå†ã€‚
  5. ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„
 */

/**
 * @param {number[]} prices
 * @param {number} fee
 * @return {number}
 */

/* -----------------  Solution1:ğŸ‘ DP (leetcode 122ğŸŸ¡çš„å˜å½¢é¢˜) -------------------------------- */
const maxProfit = (prices, fee) => {
  const len = prices.length;
  const dp = new Array(len).fill([0, 0]); // åˆ›å»ºdpäºŒç»´æ•°ç»„
  dp[0] = [-prices[0], 0]; // dpæ•°ç»„åˆå§‹åŒ–

  //æ›´æ–°dp[i]
  for (let i = 1; i < len; i++) {
    dp[i] = [
      Math.max(dp[i - 1][0], dp[i - 1][1] - prices[i]),
      Math.max(dp[i - 1][1], dp[i - 1][0] + prices[i] - fee),
    ];
  }

  return dp[len - 1][1];
};

/* -----------------  Solution2: Greedy (æ²¡æ˜ç™½ lc122çš„å˜å½¢é¢˜) -------------------------------- */
var maxProfit = function (prices, fee) {
  let result = 0;
  let minPrice = prices[0];

  for (let i = 1; i < prices.length; i++) {
    if (prices[i] < minPrice) minPrice = prices[i];

    if (prices[i] >= minPrice && prices[i] <= minPrice + fee) {
      continue;
    }

    if (prices[i] > minPrice + fee) {
      result += prices[i] - minPrice - fee;
      // ä¹°å…¥å’Œå–å‡ºåªéœ€è¦æ”¯ä»˜ä¸€æ¬¡æ‰‹ç»­è´¹
      minPrice = prices[i] - fee;
    }
  }

  return result;
};
