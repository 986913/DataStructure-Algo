/**
  1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰:
    dp[i][0] è¡¨ç¤ºç¬¬iå¤©æŒæœ‰è‚¡ç¥¨ ï¼ˆä»Šå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œæˆ–è€…æ˜¯ä¹‹å‰å°±ä¹°å…¥äº†è‚¡ç¥¨ç„¶åŽæ²¡æœ‰æ“ä½œï¼Œä¸€ç›´æŒæœ‰ï¼‰
    dp[i][1] è¡¨ç¤ºç¬¬iå¤©ä¿æŒå–å‡ºè‚¡ç¥¨çš„çŠ¶æ€
    dp[i][2] è¡¨ç¤ºç¬¬iå¤©å…·ä½“å–å‡ºè‚¡ç¥¨
    dp[i][3] è¡¨ç¤ºç¬¬iå¤©æ˜¯å†·å†»æœŸ
  2. ç¡®å®šé€’æŽ¨å…¬å¼:
    dp[i][0] = max(
      dp[i - 1][0],                 ---> å‰ä¸€å¤©æŒæœ‰è‚¡ç¥¨çŠ¶æ€
      dp[i - 1][3] - prices[i],     ---> å‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼Œåœ¨å†·å†»æœŸä¸‹ä¸€å¤©ä¹°å…¥è‚¡ç¥¨äº†
      dp[i - 1][1] - prices[i],     ---> å‰ä¸€å¤©æ˜¯ä¿æŒå–å‡ºçŠ¶æ€ï¼Œåœ¨ç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨äº†
    );
    dp[i][1] = max(
      dp[i - 1][1],                 ---> å‰ä¸€å¤©ä¿æŒå–å‡ºè‚¡ç¥¨çŠ¶æ€ 
      dp[i - 1][0] + prices[i]      ---> å‰ä¸€å¤©æ˜¯å†·å†»æœŸ
    )ï¼›
    dp[i][2] = dp[i-1][0] + prices[i]--> å‰ä¸€å¤©æŒæœ‰è‚¡ç¥¨çŠ¶æ€,åœ¨ç¬¬iå¤©å–å‡ºè‚¡ç¥¨
    dp[i][3] = dp[i-1][2]           ---> å‰ä¸€å¤©å…·ä½“å–å‡ºè‚¡ç¥¨
  3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–:
    dp[0][0] -= prices[0];
    dp[0][1] = 0,    
    dp[0][2] = 0,    
    dp[0][3] = 0,
  4. ç¡®å®šéåŽ†é¡ºåº: ä»Žå‰å‘åŽéåŽ†ã€‚
  5. ä¸¾ä¾‹æŽ¨å¯¼dpæ•°ç»„:
    è¾“å…¥ï¼šprices = [1,2,3,0,2]ä¸ºä¾‹ï¼Œdpæ•°ç»„ä¸ºï¼š
    [
      [-1, 0, 0, 0], 
      [-1, 0, 1, 0], 
      [-1, 0, 2, 0], 
      [ 1, 1, -1,2], 
      [ 1, 2, 3,-1], 
    ]
    ------------------------------
    ç»“æžœåœ¨:                ä¸­å–æœ€å¤§å€¼
          dp[prices-1][1], 
          dp[prices-1][2],
          dp[prices-1][3]
 */

/**
 * @param {number[]} prices
 * @return {number}
 */
/* ----------------- ðŸ‘ Solution: DP (leetcode 122ðŸŸ¡çš„å˜å½¢é¢˜)-------------------------------- */
const maxProfit = (prices) => {
  const len = prices.length;
  if (len < 2) return 0;
  else if (len < 3) return Math.max(0, prices[1] - prices[0]);

  let dp = Array(len)
    .fill(0)
    .map((x) => Array(4).fill(0));
  dp[0][0] = 0 - prices[0];

  for (i = 1; i < len; i++) {
    dp[i][0] = Math.max(
      dp[i - 1][0],
      Math.max(dp[i - 1][1], dp[i - 1][3]) - prices[i]
    );
    dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][3]);
    dp[i][2] = dp[i - 1][0] + prices[i];
    dp[i][3] = dp[i - 1][2];
  }

  return Math.max(dp[len - 1][1], dp[len - 1][2], dp[len - 1][3]);
};
