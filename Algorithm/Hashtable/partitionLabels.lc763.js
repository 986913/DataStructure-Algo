/**
 * @param {string} s
 * @return {number[]}
 */

/*********************  Solution ğŸ‘: Greedy + Two pointer  **********************/
/*
  eg: partitionLabels("ababcbacadefegdehijhklij") --> [9,7,8]
  
  åœ¨éå†çš„è¿‡ç¨‹ä¸­ç›¸å½“äºæ˜¯è¦æ‰¾æ¯ä¸€ä¸ªå­—æ¯çš„è¾¹ç•Œï¼Œå¦‚æœæ‰¾åˆ°ä¹‹å‰éå†è¿‡çš„æ‰€æœ‰å­—æ¯çš„æœ€è¿œè¾¹ç•Œï¼Œè¯´æ˜è¿™ä¸ªè¾¹ç•Œå°±æ˜¯åˆ†å‰²ç‚¹äº†ã€‚æ­¤æ—¶å‰é¢å‡ºç°è¿‡æ‰€æœ‰å­—æ¯ï¼Œæœ€è¿œä¹Ÿå°±åˆ°è¿™ä¸ªè¾¹ç•Œäº†ã€‚
  å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š
    ç»Ÿè®¡æ¯ä¸€ä¸ªå­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®
    ä»å¤´éå†å­—ç¬¦ï¼Œå¹¶æ›´æ–°å­—ç¬¦çš„æœ€è¿œå‡ºç°ä¸‹æ ‡ï¼Œå¦‚æœæ‰¾åˆ°å­—ç¬¦æœ€è¿œå‡ºç°ä½ç½®ä¸‹æ ‡å’Œå½“å‰ä¸‹æ ‡ç›¸ç­‰äº†ï¼Œåˆ™æ‰¾åˆ°äº†åˆ†å‰²ç‚¹
  
  https://www.bilibili.com/video/BV18G4y1K7d5/?vd_source=8b5297d974f6a5e72c60ec8ea33f2ff6
*/

const partitionLabels = (s) => {
  //ç»Ÿè®¡æ¯ä¸€ä¸ªå­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®
  let hash = new Map();
  for (let i = 0; i < s.length; i++) {
    hash.set(s[i], i);
  }

  /********* åŒå‘åŒæŒ‡é’ˆ ***********/
  let result = [];
  let slow = 0;
  let fast = 0;

  for (let i = 0; i < s.length; i++) {
    fast = Math.max(fast, hash.get(s[i])); //æ‰¾åˆ°å­—ç¬¦å‡ºç°çš„æœ€è¿œè¾¹ç•Œ,å¹¶ä¸”æ›´æ–°fastä¸‹æ ‡

    //å¦‚æœæ‰¾åˆ°å­—ç¬¦æœ€è¿œä½ç½® å’Œå½“å‰ä¸‹æ ‡ ç›¸ç­‰äº†ï¼Œåˆ™å°±æ‰¾åˆ°äº†åˆ†å‰²ç‚¹
    if (fast === i) {
      result.push(fast - slow + 1); //æ›´æ–°ç»“æœ
      slow = fast + 1; // æ›´æ–°slow
    }
  }

  return result;
};
